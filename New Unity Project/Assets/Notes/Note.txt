create a separate combat state machine